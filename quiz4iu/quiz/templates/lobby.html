{% extends 'base_layout.html' %}

{% block content %}

<style>
    .room-container{
        display: grid;
        grid-template-columns: 3fr 1fr;
    }
</style>

{% include 'lobbyinfo.html' %}


    <script>
        $(document).ready(function(){
                var csrf = $("input[name=csrfmiddlewaretoken]").val();

        setInterval(getinfo,5000);

        // function getinfo2(){
        //     $.ajax({

        //         type: 'GET',
        //         url: '/ajax_view/{{lobby.id}}/',
        //         dataType: 'json',
        //         success: function(data){
                        getinfo();
        //         }

        //     })
        // }

        function getinfo(){
            $.ajax({

                type: 'POST',
                url: '/lobbyinfo/{{lobby.id}}/', 
                data: {
                    csrfmiddlewaretoken: csrf
                },
                success: function(response) {

                    //container id in welche die Antowrt geschrieben wird
                    //var temp = "<p>"+response.lobbyid+" "+response.lobbyname+"</p>"
                    //var status = "<p>"+response.lobbystatus+"</p>"
                    //$("#lobbystatus").html(status)
                    //$("#lobbyinfo").append(temp)
                    //console.log("lobby refreshed")
                    if ({{lobby.status}} == 0) {
                        $("#lobbyinfo").html(response)
                        console.log({{lobby.status}})
                    }
                    else console.log("else")
                }
            })
            //check um in der js console (browser(f12)) zu gucken ob die funktion ausgef√ºhrt wird
            //console.log("getLobbies")
            //console.log(document.location.pathname)
        }
        });
    </script>



{% endblock %}